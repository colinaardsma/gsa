{% extends "base.html" %}
{% block content %}
{% load projection_filters %}
<div>
    {% if trade_result %}
    <h2>Projected Final Standings</h2>
    <table>
        <tr>
            <th>Total Points</th>
            <th>Team Name</th>
            <th>R</th>
            <th>HR</th>
            <th>RBI</th>
            <th>SB</th>
            <th>OPS</th>
            <th>W</th>
            <th>SV</th>
            <th>K</th>
            <th>ERA</th>
            <th>WHIP</th>
            <th>IP</th>
        </tr>
        <tbody>
        {% for team in trade_result %}
        <tr>
            <td>{{team.PointsTotal}}</td>
            <td>{{team.TEAM_NAME}}</td>
            <td>{{team.PointsR}}</td>
            <td>{{team.PointsHR}}</td>
            <td>{{team.PointsRBI}}</td>
            <td>{{team.PointsSB}}</td>
            <td>{{team.PointsOPS}}</td>
            <td>{{team.PointsW}}</td>
            <td>{{team.PointsSV}}</td>
            <td>{{team.PointsK}}</td>
            <td>{{team.PointsERA}}</td>
            <td>{{team.PointsWHIP}}</td>
            <td>{{team.StatsIP}}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    <h2>Projected Final Stats</h2>
    <table>
        <tr>
            <th>Team Name</th>
            <th>R</th>
            <th>HR</th>
            <th>RBI</th>
            <th>SB</th>
            <th>OPS</th>
            <th>W</th>
            <th>SV</th>
            <th>K</th>
            <th>ERA</th>
            <th>WHIP</th>
            <th>IP</th>
        </tr>
        <tbody>
        {% for team in trade_result %}
        <tr>
            <td>{{team.TEAM_NAME}}</td>
            <td>{{team.StatsR}}</td>
            <td>{{team.StatsHR}}</td>
            <td>{{team.StatsRBI}}</td>
            <td>{{team.StatsSB}}</td>
            <td>{{team.StatsOPS|floatformat:3}}</td>
            <td>{{team.StatsW}}</td>
            <td>{{team.StatsSV}}</td>
            <td>{{team.StatsK}}</td>
            <td>{{team.StatsERA|floatformat:2}}</td>
            <td>{{team.StatsWHIP|floatformat:2}}</td>
            <td>{{team.StatsIP}}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    <h2>Projected Final Volatility</h2>
    <table>
        <tr>
            <th>Volatility(<small>Down</small> Up)</th>
            <th>Team Name</th>
            <th>R</th>
            <th>HR</th>
            <th>RBI</th>
            <th>SB</th>
            <th>OPS</th>
            <th>W</th>
            <th>SV</th>
            <th>K</th>
            <th>ERA</th>
            <th>WHIP</th>
        </tr>
        <tbody>
        {% for team in trade_result %}
        <tr>
            <td><small>{{team.Total_Downward_Volatility}} </small>{{team.Total_Upward_Volatility}}</td>
            <td>{{team.TEAM_NAME}}</td>
            <td><small>{{team.DownVol_R}} </small>{{team.UpVol_R}}</td>
            <td><small>{{team.DownVol_HR}} </small>{{team.UpVol_HR}}</td>
            <td><small>{{team.DownVol_RBI}} </small>{{team.UpVol_RBI}}</td>
            <td><small>{{team.DownVol_SB}} </small>{{team.UpVol_SB}}</td>
            <td><small>{{team.DownVol_OPS}} </small>{{team.UpVol_OPS}}</td>
            <td><small>{{team.DownVol_W}} </small>{{team.UpVol_W}}</td>
            <td><small>{{team.DownVol_SV}} </small>{{team.UpVol_SV}}</td>
            <td><small>{{team.DownVol_K}} </small>{{team.UpVol_K}}</td>
            <td><small>{{team.DownVol_ERA}} </small>{{team.UpVol_ERA}}</td>
            <td><small>{{team.DownVol_WHIP}} </small>{{team.UpVol_WHIP}}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
    <h2>Trade Analyzer</h2>
    <form method="post">
        {% csrf_token %}
        <p>League Key: {{league_key}}</p>
        <table>
            <thead>
            <tr>
                <th>{{team_a.TEAM_NAME}}</br>Players to Trade:</th>
                <th>{{team_b.TEAM_NAME}}</br>Players to Trade:</th>
            </tr>
            </thead>
            <tr>
                <td>
                    <select name="team_a_players" name="team_b_players" multiple size="30">
                        {% for player in team_a.ROSTER %}
                        <option value="{{player}}" id="{{player}}" name="{{player}}">{{player.NAME}}</option>
                        {% endfor %}
                    </select>
                </td>
                <td>
                    <select name="team_b_players" id="team_b_players" multiple size="30">
                        {% for player in team_b.ROSTER %}
                        <option value="{{player}}" id="{{player}}" name="{{player}}">{{player.NAME}}</option>
                        {% endfor %}
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="hidden" name="team_a" value="{{team_a}}" />
                    <input type="hidden" name="team_b" value="{{team_b}}" />
                    <input type="hidden" name="league_no" value="{{league_no}}" />
                    <input type="hidden" name="league_key" value="{{league_key}}" />
                    <input type="hidden" name="team_list" value="{{team_list}}" />
                    <input type="submit" />
                </td>
            </tr>
        </table>
    </form>
    <p>Hold down the Ctrl (windows) / Command (Mac) button to select multiple options.</p>
    {% endif %}
</div>
{% endblock %}